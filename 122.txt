gdata.s1
    ゲームデータ
    i32 x 1000

0 プレイヤーの死亡回数
1 プレイヤーの最深到達階層
2 モンスターの殺害数
3 現在のマップにおける、プレイヤーでもペットでも冒険者でもないキャラクタの数
  NOTE: 本家ではバグによりこの変数の値は実際のものと異なる
4 プレイヤーの経過ターン数
5 プレイヤーのワールドマップ上におけるX座標
  NOTE: プレイヤーがワールドマップ以外の場所にいる場合、そのマップがワールドマップ上において位置しているX座標になる
6 プレイヤーのワールドマップ上におけるY座標
  NOTE: 同上
7 プレイヤーの経過日数 (ゲーム内カレンダー基準)
8 乱数シード
  NOTE: 範囲は [2, 802)
9 乱数シード2
  NOTE: 範囲は [2, 202)。本家では未使用
10 ゲーム内日時: 年
11 ゲーム内日時: 月
12 ゲーム内日時: 日
13 ゲーム内日時: 時
14 ゲーム内日時: 分
15 ゲーム内日時: 秒
16 外部インベントリのシリアルID
   1000からスタートし、新しいIDが必要になるたびにインクリメントしていく
   この値 + 1 が次に使われるIDとなる
17 天候
   0: 晴れ
   1: エーテル
   2: 雪
   3: 雨
   4: 雷雨
18 次に天候が変わるまでの時間 (単位: 時)
19 TODO 一つ前のマップ番号
20 現在のマップ番号
21 (unused)
22 現在の階層
23 (unused)
24 我が家の規模
   0: 洞窟
   1: 森のほったて小屋
   2: 住み心地のいい家
   3: セレブ邸
   4: サイバーハウス
   5: 小城
25 魔力の抽出と魔力の充填に使われる魔力
26 現在のマップに入ったときの初期位置タイプ
   1: 昇り階段
   2: 降り階段
   3: ワールドマップからの侵入方向
      NOTE: 侵入方向は gdata(35) で決まる
      gdata(35) = 0: マップ北端
      gdata(35) = 1: マップ東端
      gdata(35) = 2: マップ西端
      gdata(35) = 3: マップ南端
      gdata(60) と gdata(61) が設定されている場合、そちらが優先される。詳細はそちらを参照のこと
   4: マップ中央
   5: ランダム位置
   6: ワールドマップのランダム位置
      NOTE: ワールドマップにはこの値が指定されているが、使われることはない
   7: 座標を直接指定
   8: マップ南端
27 シェルターのシリアルID
   100からスタートし、新しいIDが必要になるたびにインクリメントしていく
   この値 + 100 が次に使われるIDとなる
28 プレイヤーの装備品に付与されているセブンリーグブーツ効果の合計
   NOTE: エンチャントパワー / 8 が加算される
29 プレイヤーが「エーテルの風からあなたを保護する」のエンチャントが付与された装備をしているかどうか
   0: 通常
   1: エンチャントが付与された装備を装備中
30 (unused)
31 (unused)
32 (unused)
33 (unused)
34 (unused)
   NOTE: gdata(30) から gdata(34) までは、ソースコード中で使用されているが未実装。不思議のダンジョンのダッシュのような機能を実装するための変数
35 プレイヤーの向いている方向
   0: 南
   1: 西
   2: 東
   3: 北
36 再生済みのメインシナリオシーンIDのうち、最大のもの
   シーンをムービーディスクで再生できるか否かを決定する。シナリオ中で再生されたものは閲覧できる
37 松明を灯しているかどうか
   0: 通常
   1: 松明を灯している
   NOTE: 松明を所持している必要はない。灯しているとネフィア内がやや明るくなる
38 Angband のイースターエッグ用フラグ (Qy@)
   0: 通常
   1: "Q" を押した直後
   2: "Q" に続けて "y" を押した直後
   -1: @出現済み
   NOTE: 本家には "Q"、"y" と何度も続けるとクラッシュするバグがある
39 これまでにトレイナーから教わったスキルの数
   習得にかかるプラチナは、15 + 3 * この値 で計算される
   NOTE: 願いや能力獲得の巻物などによって得たスキルは計上されない
40 ショートカット (0)
41 ショートカット (1)
42 ショートカット (2)
43 ショートカット (3)
44 ショートカット (4)
45 ショートカット (5)
46 ショートカット (6)
47 ショートカット (7)
48 ショートカット (8)
49 ショートカット (9)
50 ショートカット (10; Ctrl+0 or Shift+0)
51 ショートカット (11; Ctrl+1 or Shift+1)
52 ショートカット (12; Ctrl+2 or Shift+2)
53 ショートカット (13; Ctrl+3 or Shift+3)
54 ショートカット (14; Ctrl+4 or Shift+4)
55 ショートカット (15; Ctrl+5 or Shift+5)
56 ショートカット (16; Ctrl+6 or Shift+6)
57 ショートカット (17; Ctrl+7 or Shift+7)
58 ショートカット (18; Ctrl+8 or Shift+8)
59 ショートカット (19; Ctrl+9 or Shift+9)
   10000 未満の場合は技能か魔法のIDが直接入る
   10000 以上の場合は以下の通り:
      50000 + アイテムID: 食べる[e]
      70000 + アイテムID: 読む[r]
      80000 + アイテムID: 飲む[q]
      90000 + アイテムID: 振る[Z]
     140000 + アイテムID: 使う[t]
     150000 + アイテムID: 開く[o]
     260000 + アイテムID: 投げる[T]
60 プレイヤーがワールドマップに出たとき、直前にいたマップで最後にいたX座標
61 プレイヤーがワールドマップに出たとき、直前にいたマップで最後にいたY座標
   あるマップからワールドマップに出て、一歩も動かずにそのまま入り直すと最後にいた座標に入り直すことができるが、その「最後にいた座標」を覚えておくための変数
   NOTE: ワールドマップ上で一歩でも動くと -1 に初期化される
62 ワールドマップ上でプレイヤーが立っているマップチップID
   本家では野外に入るときのマップタイプにのみ影響する
   4-8: 森
   9-12: 草原
   13-16: 荒野
   26-32: 雪原
   33-65: 街道
   198-230: 雪原
   264-362: 水上
            NOTE: 定義はされているが水タイルには足を踏み入れられないため無意味
   568-570: 雪原
   その他: 平地
   NOTE: 雪原の判定は、実際には chipm(0, マップチップID) が 4 かどうかで行われる
   NOTE: これはワールドマップで使われるマップチップIDであり、それ以外の場所で使われるものとは一致しない。例えば、妹の館の雪タイルは上のリストの雪原タイルとは異なるIDを持つ
63 脱出中あるいは帰還中を表すフラグ
   0: 通常
   非0: 脱出あるいは帰還が発動するまでの残りターン数。プレイヤーのターン基準で 1ずつ減っていく
   NOTE: 帰還のターン数は 15+rnd(15)、脱出のターン数は 5+rnd(10)
   NOTE: この値が 0 でないときに脱出あるいは帰還をしようとすると現在の脱出あるいは帰還を中止する
64 TODO 移動先のマップ番号
65 TODO 移動先の階層
66 TODO 直前までいたマップ番号
67 TODO 直前までいたマップ階層
68 TODO 直前までいたマップでのX座標
69 TODO 直前までいたマップでのY座標
70 現在遂行中の即時依頼タイプ
   1: アリーナ挑戦中
   2: ペットアリーナ挑戦中
   1001: 討伐依頼
   1006: 収穫依頼
   1009: 演奏依頼
   1007: 危険な護衛依頼において、暗殺者が現れたとき
   1008: 変異種討伐依頼 (一体を討伐するタイプ)
   1010: 変異種討伐依頼 (複数体を殲滅するタイプ)
   NOTE: この値が非0であるなら、死亡時のペナルティが軽くなる (1.16ならノーペナルティ、1.22からは意思と魅力の経験値低下)
71 敵を倒したときに残り討伐数を表示するかどうか
   1: 表示する
   それ以外: 表示しない
   NOTE: 1 になるのは gdata(70) が 1、1001、1007、1010 のとき
   NOTE: より一般的には現在遂行中の即時依頼の qdata(14, gdata(72)) と同じ値をとるが、1 かそれ以外かでしか判定されない
72 現在遂行中の即時依頼番号
   qdata のインデックス (qdata(*, gdata(72)) が現在遂行中の即時依頼データ)
73 現在遂行中の即時依頼のステータス
   0: 現在即時依頼を遂行していない
   1: 遂行中
   3: 完了
74 TODO executing_immediate_quest_fame_gained
75 TODO number_of_existing_quests
   現在存在する依頼データ数
76 TODO basic_point_of_home_rank
   家ランキングの基本ポイント
77 TODO total_deco_value
78 TODO total_heirloom_value
79 TODO reset_world_map_in_diastrophism_flag
80 TODO cargo_weight
   荷車重量
81 TODO initial_cart_limit
   初期荷車限界
82 TODO current_cart_limit
   現在荷車限界
83 プレイヤーが「雷雨と雪による足止めを無効にする」のエンチャントが付与された装備をしているかどうか
   0: 通常
   1: エンチャントが付与された装備を装備中
84 時間制限依頼の残り時間 (単位: 分)
85 TODO ether_disease_stage
   現在エーテル病進行度
86 ショウルームに同梱されている CNPC の数
   NOTE: 本家では最大10種類
87 TODO executing_immediate_quest_time_left_display_period
88 TODO time_when_textbook_becomes_available
   次回学習書使用可能日付
89 TODO light
90 TODO continuous_active_hours
   連続活動時間
               >= 50で「要睡眠」(赤字)
               >= 30で「要睡眠」(黒字)
               >= 15で「睡眠化」
91 TODO activity_about_to_start
92 TODO sleep_experience
    睡眠経験値
             前回の成長度の増加を伴う睡眠時以降に稼いだ経験値
             成長度の増加を伴う睡眠時の成長度の増加数に関係
93 TODO acquirable_feat_count
    フィート取得可能数
94 TODO chara_last_attacked_by_player
95 TODO wish_count
             累積願い回数
             ※Version 1.10未満では、次回”願い”可能レベル
             初期値0で1/(gdata(095) + 1)の確率で願いが成立
             願いが成立した場合、1増加する
             ゲーム内時間毎年01/01に1減る
96 Elonaのバージョン
   本家の場合次の2通り:
   1160: 1.16 Reloaded fix2 ないし Xmas Edition
   1220: 1.22
   NOTE: この変数だけを見て安定版とクリスマスエディションを区別することはできない
97 残り遺産相続権
98 TODO character_and_status_for_gene
  遺伝子作成相手ユニットNo.(？)
99 次に異名投票ができるようになるゲーム内日時 (単位: 時)
100-119 (unused)
120 TODO ranks
140 TODO rank_deadlines
160 TODO taken_quests
170 TODO cost_to_hire
    ジャーナルに表示されている人件費
171 TODO rogue_boss_encountered
172-178 (unused)
179 TODO left_bill
    未納金の請求書枚数
180 TODO distance_between_town
    前回街(家)を出発してから移動したマイル数
181 TODO departure_date
    前回街(家)を出発した日付
182 TODO left_town_map
    直前に出発したマップNo
183 騎乗中のペットのキャラクタ番号
    0: 騎乗していない
    非0: 馬
184 マップを強制的に再生成するかどうかを決定するためのフラグ
    詳細は mdata(19) を参照のこと
185 プレイヤーが「神が発する電波をキャッチする」のエンチャントが付与された装備をしているかどうか
    0: 通常
    1: エンチャントが付与された装備を装備中
186 TODO void_next_lord_floor
187 プレイヤーが「他者の信仰を明らかにする」のエンチャントが付与された装備をしているかどうか
    0: 通常
    1: エンチャントが付与された装備を装備中
188-200 (unused)
201 ノルンのヘルプを表示したかどうか: 最初「やあ、君が新しくやって来た冒険者だね。〜」
202 ノルンのヘルプを表示したかどうか: ワールドマップ「君が今いる場所はワールドマップだ。〜」
203 ノルンのヘルプを表示したかどうか: 街「街だー！人の往来で辺りに活気があるね。〜」
204 ノルンのヘルプを表示したかどうか: 依頼「この掲示板には、街の人々からの依頼が〜」
205 ノルンのヘルプを表示したかどうか: 採取スポット「君が立っている場所は、採取スポットだ。〜」
206 ノルンのヘルプを表示したかどうか: ランダムネフィア「君が今いる場所には、ランダムエリアがある。〜」
207 ノルンのヘルプを表示したかどうか: 宿屋「宿屋では食事をとることができるよ。〜」
208 ノルンのヘルプを表示したかどうか: トレイナー「トレイナーからは、新しいスキルを学んだり、〜」
209 ノルンのヘルプを表示したかどうか: 睡眠「おや、眠そうな顔だね。君はもちろん、定期的に睡眠を〜」
210 ノルンのヘルプを表示したかどうか: 食事「お腹が減ってきたかい？ 食料の確保はとても重要だよ。〜」
211 ノルンのヘルプを表示したかどうか: 雷雨「ひえー…どしゃぶりだ！ こんなに天気が悪い時に〜」
212 ノルンのヘルプを表示したかどうか: 雪「雪だよー！ 旅人にとって雪は厄介な代物だね。〜」
213 ノルンのヘルプを表示したかどうか: エーテルの風「エーテルの風だ… この風はとても厄介な影響を〜」
214 ノルンのヘルプを表示したかどうか: シェルター「シェルターについて少し説明するね。〜」
215 ノルンのヘルプを表示したかどうか: エーテル病「君もとうとう病におかされてしまったか… 〜」
216 ノルンのヘルプを表示したかどうか: 給料「待ちに待った給料日♪毎月1日と15日は給料日だ。〜」
217 ノルンのヘルプを表示したかどうか: ムーンゲート「ぉお〜ゲートだ… ゲートは他の冒険者、〜」
     0: 未表示
     1: 表示済
     設定でノルンを切っている場合は、表示条件を満たしていても 0 のままになる
250 ロミアスのチュートリアル進行度
    0: チュートリアル開始前
    1: 食事
    2: 採掘
    3: 偽金塊を見つける
    4: 鑑定
    5: 装備
    6: プチ
    8: 宝箱
    -1: チュートリアル完了
252 TODO メインシナリオ進行度
253 愚者の魔石を取得しているかどうか
254 賢者の魔石を取得しているかどうか
255 覇者の魔石を取得しているかどうか
    0: 未取得
    1: 取得済
256 カジノを一度でも使用したかどうか
    0: 未使用
    1: 使用済
    NOTE: 初回 (gdata(256) が 0 のとき) のみカジノチップを 10枚もらえる
257 ヴェルニースを一度でも訪問したかどうか
    0: 未訪問
    1: 訪問済
    NOTE: 初回 (gdata(257) が 0 のとき) のみペットとの再会イベントが起こる
258 TODO released_fire_giant
259 TODO fire_giant
260 TODO holy_well_count
261 TODO quest_flags.duration_of_kamikaze_attack
262 TODO diastrophism_flag
263 TODO guild.belongs_to_mages_guild
264 TODO guild.belongs_to_fighters_guild
265 TODO guild.belongs_to_thieves_guild
266 TODO guild.mages_guild_quota
267 TODO guild.fighters_guild_quota
268 TODO guild.fighters_guild_target
269 TODO guild.thieves_guild_quota
450 TODO quest_flags.putit_attacks
451 TODO quest_flags.thieves_hideout
452 TODO quest_flags.nightmare
453 TODO quest_flags.pael_and_her_mom
454 TODO quest_flags.wife_collector
455 TODO quest_flags.puppys_cave
456 TODO quest_flags.cat_house
457 TODO quest_flags.defense_line
458 TODO quest_flags.novice_knight
459 TODO quest_flags.kamikaze_attack
460 TODO quest_flags.mias_dream
461 TODO quest_flags.rare_books
462 TODO quest_flags.pyramid_trial
463 TODO quest_flags.red_blossom_in_palmia
464 TODO quest_flags.ambitious_scientist
465 TODO quest_flags.sewer_sweeping
466 TODO guild.joining_mages_guild
467 TODO guild.joining_fighters_guild
468 TODO guild.joining_thieves_guild
469 TODO guild.mages_guild_quota_recurring
470 TODO guild.fighters_guild_quota_recurring
471 TODO guild.thieves_guild_quota_recurring
472 TODO quest_flags.minotaur_king
473 TODO quest_flags.little_sister
474 TODO quest_flags.blue_capsule_drug
700 TODO ether_disease_history
750 TODO tracked_skills
800 TODO ether_disease_speed
801 時止めの残りターン数
802 TODO ex_arena_wins
803 TODO ex_arena_level
804 次にアップロードできるようになるゲーム内日時 (単位: 時)
    NOTE: 現在はアップロード先の公式サーバが停止している
805 TODO play_time
806 TODO last_etherwind_month
807 TODO god_rank
808 TODO player_is_changing_equipment
809 TODO proc_damage_events_flag
810 リトルシスター殺害回数
811 リトルシスター救出回数
812 リトルシスタークエストの報酬を受け取った回数
813 TODO tcg_used_deck
814 TODO number_of_waiting_guests
815 TODO politics_map_id
820 TODO politics_tax_amount
825 最後にギルドトレイナーが自宅に訪問した月
    NOTE: 一月につき一度しか訓練はできない
826 TODO item_turns
827 次にクミロミの秘密の経験が使えるようになるレベル - 1
828 wizardモード (0: 通常、1: wizard)
830 TODO tcg_decks
850 TODO destination_outer_map
851 ガードに届けた落し物の数
    ゲーム内日時 1月1日に1減る
    NOTE: 安定版およびXmas Edition には存在しない
852-999 (unused)






ibit
1 耐酸
2 耐熱
3 (unused)
4 使用可能回数あり
5 貴重品
6 媚薬混入
7 再使用にクールタイムあり
8 エヘカトル祝福
9 盗品
10 生きている
11 (unused)
12 交換依頼の対象
13 大事なもの
14 毒薬混入
15 エターナルフォース
16 ショウルームでしか使えない
17 心温まる手作り品



cbit
1-4 (unused)
5 浮遊
6 不可視
7 透明視
8 混乱無効
9 盲目無効
10 恐怖無効
11 睡眠無効
12 麻痺無効
13 毒無効
14 腐消化
15 盗難防止
16 変装中 (インコグニート)
17 金貨を落とす
18 自爆
19 死の宣告持ち
20 連続魔法持ち
21 レイハンド持ち
22 乗馬適正
23 分裂 (バブルタイプ)
24 一部のマイナス効果エンチャを装備中 (生き血/成長阻害/魔物呼び)
25 乗馬非適正
26 属性ダメージ無効
27 分裂2 (キューブタイプ)
28 メタル
29 出血を抑える
30 盾殴りフィート持ち
31 地雷無効
32 短気 (被弾時に怒り)
33-959 (unused)
960 家畜
961 結婚済み
962 遺伝子作成済み
963 護衛依頼の対象
964 訪問者または終末により生成されたキャラ
965 黙らせる
966 聴診器
967 PCC持ち (着替えさせる)
968 紐
969 契約中の冒険者
970 クエストターゲットフラグ
971 サブクエ護衛依頼の対象 (ポピー)
972 自爆スイッチフラグ
973 死の宣告バフ
974 レイハンド使用可能フラグ
975 騎乗されている
976 ランダムネフィアのボス
977 名前持ち
978 寄生
979 交戦しない (他のモンスターから敵対されず、自分から攻撃を仕掛けることもない)
    NOTE: ポピーとロミアスがけしかけてくるプチに設定される
980 契約バフ
981 状態を更新する必要あり。分裂した直後のキャラに設定される
982 家に訪問してきたばかりのゲストで、まだ話していない
983 無機物
984 友情の証を受取済み
985 サンドバッグに吊られている
986 拒食症
987 プレイヤーからアイテムを渡された直後
988 MP回復を頻繁におこなう (地雷犬)
989 言葉を教えている
    NOTE: cdatan(4, *) も参照のこと
990 信仰設定済み
    NOTE: 本家では、cdata(61, *) が 非0 のときこのフラグが 0 のままの場合があるが、本来は信仰が設定されていれば無条件で 1 になるべき
991 聖夜祭限定キャラ





qdata.s1
    依頼データ
    i32 x 20 x 500

0 依頼者のキャラ番号
  NOTE: qdata(1, *) が gdata(20) と一致しない場合、同じキャラ番号でも別人
1 依頼者がいるマップのマップ番号
2 依頼が取り下げられる日時 (単位: 時)
3 依頼ID
  1001: 討伐
  1002: 配達
  1003: 料理
  1004: 納入
  1006: 収穫
  1007: 護衛
  1008: 変異種討伐(一体)
  1009: 演奏
  1010: 変異種討伐(複数体)
  1011: 交換
4 護衛依頼タイプ
  0: 暗殺
  1: 急ぎ
  2: 簡単
5 依頼難易度
6 報酬金額
7 報酬アイテム
  1: 装備品
  2: 魔道具
  3: 防具
  4: 武器
  5: 補給品
  60001: 井戸
  57000: 食べ物
  56000: 杖
  53000: 巻物
  52000: ポーション
  64000: ジャンク
  77000: 鉱石
  60000: 家具
  25000: 矢弾
8 進行度
  0: 受注前
  1: 遂行中
  3: あとは報告するだけだ
9 期限 (単位: 日)
  -1 は即時依頼
10 付加情報1
   交換、配達依頼の場合、依頼者番号 (依頼番号と同じ)
   護衛依頼の場合、暗殺者とエンカウントした回数
     暗殺者が現れない (qdata(4, *) が 0 でない) 場合は常に 0
11 対象アイテムID
   交換依頼、納入依頼、配達依頼のアイテムID
12 付加情報2
   料理の場合、料理カテゴリ
   収穫の場合、必要納入作物重量
   護衛の場合、護衛先マップ番号
   演奏の場合、必要ポイント
   討伐、変異種討伐(一体)、変異種討伐(複数体)の場合、討伐対象のキャラID
13 付加情報3
   料理の場合、料理ランク
   収穫の場合、納入済み重量
   護衛の場合、護衛中キャラ番号
   演奏の場合、現在ポイント
14 TODO 依頼のカテゴリ(?)
15 付加情報4
   配達依頼の場合、届け先の人物にアイコンを表示するかどうか
     0: 非表示
     1: 表示
16-19 (unused)





itemmemory
    dim itemmemory 3, 800
    kitem.s1
    0 identify_state
    1 generate_count
    2 is_decoded

recipememory
    dim recipememory, 1200
    krecipe.s1
    0 is_known

npcmemory
    dim npcmemory, 2, 800
    knpc.s1
    0 kill_count
    1 generate_count


qname
    sdim qname, 40, 500
    qname.s1
    indexed by qdata index




cdata
    キャラクタデータ
    i32 x 500 x 245

0 状態
1 現在位置のX座標
2 現在位置のY座標
3 次に移動する位置のX座標
4 次に移動する位置のY座標
5 死んでいるキャラが復活する日時 (単位: 時)
6 プレイヤーの視界判定用変数
7 キャラチップID + 色ID * 1000
8 性別
  0: 男性
  1: 女性
9 関係
  -3: 敵対 (ほとんどのモンスター、交戦中のキャラ)
  -2: 敵対一歩手前 (非敵対のキャラに一度攻撃した場合)
  -1: 無関心 (少女、猫など)
  0: 中立 (街のNPCなど)
  10: 仲間 (ペット、護衛依頼の対象など)
10 ターンエネルギー
11 現在の速度
12 次のターンに使用するアイテム
13 ポートレイトID
14 興味度
15 興味度が回復する日時 (単位: 時)
16 性格
   話しかけたときの会話内容が変化
17 友好度
18 口調
19 身長 (単位: cm)
20 体重 (単位: kg)
21 生まれた年 (単位: 年)
   年齢は今年とこの値の差で計算される
22 満腹度
23 設定されているログに表示されるセリフの数
24 (unused)
25 品質
   1: 粗悪
   2: 良質
   3: 高品質
   4: 奇跡
   5: 神器
   6: 特別
   NOTE: 値とその意味はアイテムの品質と同じ
26 経過ターン数
27 キャラID
28 視界の距離
29 交戦中のキャラ番号
30 金貨
31 プラチナ硬貨
32 戦闘スタイル
   0: 素手
   1: 盾持ち
   2: 両手持ち
   4: 二刀流
   NOTE: ビットフラグになってはいるが、本家では排他的に設定される
33 物理攻撃のテキストタイプ
34 名声
35 現在経験値
36 次のレベルまでに必要な経験値
37 速度補正
38 レベル
39 次ターンの速度補正
40 (unused)
   常に -10000 がセットされる。想定されていた用途も不明
41 スキルポイント
42 累積獲得スキルポイント
   NOTE: 本家ではセットされるだけで未使用
43 インベントリの総重量
44 インベントリに所持可能な総重量
45 圧迫状態
46-47 (unused)
48 これまでに到達した最大レベル
49 カルマ
50 現在HP
51 最大HP
52 現在SP
53 最大SP
54 (unused)
55 現在MP
56 最大MP
57-60 (unused)
61 信仰
   cbit(990, *) が 0 でこの値が 0 のときは信仰未設定、cbit(990, *) が 1 でこの値が 0 のときは無信仰
62 信仰ポイント
63 祈りポイント
64 装備品の総重量
65 物理攻撃以外のテキストタイプ
66 完全貫通率 
67 クリティカルヒット率
68 速度ペナルティ
   NOTE: 本家では部位数超過によるペナルティのみこの変数で処理される。圧迫などは cdata(37, *) に反映される
69 キャラ生成時の関係
   NOTE: cdata(9, *) の元々の値
70 PV
71 DV
72 命中修正
73 ダメージ修正
74-75 (unused)
76 PV補正値
77 DV補正値
78 反撃
   属性ID + パワー * 1000 の形で保持される
79 絵文字アイコン
   絵文字ID + ターン数 * 10
80 現在のマップ番号
81 現在の階層
82 依頼における依頼者番号
   依頼者番号は依頼番号と同じで、qdata の添字
   依頼を出さないキャラの場合 0
83 向き
84 雇用期間が終了する日時 (単位: 時)
85 雇用回数
86 狂気度
87 呪い強度
88 追加打撃率
89 追加射撃率
90 物理ダメージ軽減率
91 ダメージ無効率
92 切り傷反撃強度
93 吐いた回数
94-99 (unused)
100-129 装備スロット (30枠)
        部位ID * 10000 + (アイテム番号+1)
        アイテム番号+1 が 0 のときはその部位に何も装備していない
        部位ID が 0 のときはその装備スロットがない
130-139 (unused)
140 継続行動ID
    0 なし
    1 食事
    2 読書
    3 ワールドマップの移動
    4 睡眠
    5 採掘 (壁)
    6 演奏
    7 釣り
    8 探索
    9 採掘 (地面)
    10 その他
    11 気持ちいいこと
    12 調合
141 継続行動残りターン数
142 継続行動で使用中のアイテム番号
143 継続行動中にダメージを受けたかどうか
144 演奏の出来栄え
145 演奏のおひねり総額
146-149 (unused)
150 役割
151 店の規模
152 気持ちいいことの相手のキャラ番号
    買い手の場合、相手のキャラ番号+10000
153 店のインベントリ番号
154 次に店の在庫が更新される日時 (単位: 時)
155 (unused)
156 冒険者フラグ
    NOTE: 冒険者の場合100が代入されているが、本家では代入されているだけで参照されない
          冒険者かどうかの判定は単に cdata(150, *) を見れば事足りる
157 CNPC番号
    NOTE: この値は起動のたびに変化しうる。cdatan(5, *) にIDそのものが格納されているため、データロード時にはこれを参照して cdata(157, *) を適切に書き換えなければならない
158 種族ID
    NOTE: 本家では代入されているだけで参照されない
          種族は cdatan(2, *) を見れば事足りる
159-170 (unused)
171 初期位置のX座標
172 初期位置のY座標
173-199 (unused)
200 (unused)
201 興奮度
202 aiCalm
203 TODO AI関連、詳細不明
204 (unused)
205 移動目標のX座標
206 移動目標のY座標
207 aiMove
208 aiDist
209 aiActSubFreq
210 (unused)
211 aiHeal
212 設定された行動数
213-214 (unused)
215-219 基本行動 (5枠)
220-224 基本行動 (5枠)
225-229 (unused)
230 素手攻撃
    属性 + パワー*100000
231-239 (unused)
240 主能力補正 (筋力)
241 主能力補正 (耐久)
242 主能力補正 (器用)
243 主能力補正 (感覚)
244 主能力補正 (習得)
245 主能力補正 (意思)
246 主能力補正 (魔力)
247 主能力補正 (魅力)
248 主能力補正 (速度)
249 主能力補正 (運勢)
250 状態異常残りターン数 (毒)
251 状態異常残りターン数 (睡眠)
252 状態異常残りターン数 (麻痺)
253 状態異常残りターン数 (盲目)
254 状態異常残りターン数 (混乱)
255 状態異常残りターン数 (恐怖)
256 状態異常残りターン数 (朦朧)
257 状態異常残りターン数 (酔い)
258 状態異常残りターン数 (出血)
259 状態異常残りターン数 (濡れ)
260 状態異常残りターン数 (狂気)
261 状態異常残りターン数 (病気)
262 状態異常残りターン数 (重力)
263 状態異常残りターン数 (窒息)
264 状態変化残りターン数 (怒り)
265-269 (unused)
270 成長バフ (筋力)
271 成長バフ (耐久)
272 成長バフ (器用)
273 成長バフ (感覚)
274 成長バフ (習得)
275 成長バフ (意思)
276 成長バフ (魔力)
277 成長バフ (魅力)
278 成長バフ (速度)
279 成長バフ (運勢)
    NOTE: 運勢の成長バフは本家には定義されておらず、運勢維持がついた装備を食べるとクラッシュする
          ヴァリアントでは、運勢維持がついた装備を食べても何も起こらないようにしたものと、運勢の成長バフを新たに定義したものとの2通りの解決策が取られている
280-327 バフ
        バフID、パワー、残りターン数の3要素が16枠分並んでいる
328-449 (unused)
450-479 フラグ用 (temporary)
480-499 フラグ用 (permanent)




adata.s1
    エリアデータ
    i32 x 50 x 500
    NOTE: 1.16 と xmas およびそれらを基にした BCF と URW では 200

0 マップタイプ
  1: ワールドマップ
  2: アクリ・テオラ、ラーナ、工房ミラル・ガロク、大使館
  3: 街
  4: 野外
  5: プレイヤー物件 (プレイヤーによって設置されたシェルターを含む)
  6: ルミエスト墓所、休戦地、妹の館、混沌の城、実験場、各街のシェルター
  7: ハウスドーム、闘技場、コロシアム、即時依頼マップ
  20: ネフィア (洞窟)
  21: ネフィア (塔)
  22: ネフィア (森)
  23: ネフィア (砦)
1 ワールドマップにおけるX座標
2 ワールドマップにおけるY座標
3 入り口タイプ
4 マップチップセットID
  「graphic/map[この値].bmp」が使われる
5 ネフィアの接頭辞
  0:
    危険度 1-4:    はじまりの〜
    危険度 5-9:    時めきの〜
    危険度 10-14:  迷いの〜
    危険度 15-19:  死の〜
    危険度 20以上: 混沌の〜
  1:
    危険度 1-4:    安全な〜
    危険度 5-9:    冒険者の〜
    危険度 10-14:  勇者の〜
    危険度 15-19:  闇の〜
    危険度 20以上: 不帰の〜
6 到達済みの最深層
7-8 (unused)
9 ターンコスト
10 最深層
11 再生成フラグ
   0: 毎回再生成 (子犬やすくつ)
   1: それ以外
12 TODO
   0: TODO
   1: 再度マップを訪れた際、キャラが初期位置に戻される
13-14 (unused)
15 ワールドマップから見たときのマップチップID
16 マップID
   2: 野外
   3: レシマス
   4: ノースティリス
   5: ヴェルニース
   6: 闘技場
   7: わが家
   8: ランダムネフィア
   9: 実験場
   10: ルミエスト墓所
   11: ポート・カプール
   12: ヨウィン
   13: 即時依頼マップ
   14: ダルフィ
   15: パルミア
   16: 灼熱の塔
   17: 死者の洞窟
   18: 古城
   19: 竜窟
   20: 神々の休戦地
   21: アクリ・テオラ
   22: 混沌の城《獣》
   23: 混沌の城《機甲》
   24: 混沌の城《奇形》
   25: ラーナ
   26: 山道
   27: 子犬の洞窟
   28: イークの洞窟
   29: 妹の館
   30: シェルター
   31: 牧場
   32: パルミア大使館
   33: ノイエル
   34: 工房ミラル・ガロク
   35: ハウスドーム
   36: ルミエスト
   37: ピラミッド
   38: ミノタウロスの巣
   40: コロシアム
   41: 牢獄
   42: すくつ
   43: ノースティリス南関所
   44: サウスティリス
   45: サウスティリス北関所
   46: 煙とパイプ亭
   47: テストワールド
   48: テストワールド北関所
   101: 博物館
   102: 店
   103: 畑
   104: 倉庫
   NOTE: adata の添字と必ずしも対応しないが、多くは一致している。倉庫や畑、ランダムネフィアなど、複数存在するマップの場合は一致しない
17 危険度 (開始階層)
18 タイルセットID
20 ボス討伐済みフラグ
   0: ボスなし
   -1: 討伐済み
   それ以外: ボスのキャラ番号
21 屋内フラグ
   1: 屋内
   2: 屋外
22 アリーナ連勝数
23 ペットアリーナ連勝数
24 アリーナの対戦相手を決定する乱数シード
25 アリーナの対戦相手を決定する乱数シードが更新される日時 (単位: 時)
26 次に決闘が開催される日時 (単位: 時)
27 次にランブルが開催される日時 (単位: 時)
28 依頼街番号
   依頼データで使用される街番号。依頼が発生しないマップの場合は常に 0
29 聖夜祭フラグ
   0: 通常
   1: 聖夜祭開催中
   NOTE: ノイエル以外は常に 0
30 外のマップ番号
   脱出先マップの決定などに使われる。通常は配置されているワールドマップのマップ番号
31-49: (unused)







inv
    i32 x 70 x 5480


0 スタック数
1 一個あたりの価値
2 アイテムチップID
3 アイテムID
4 品質
  1: 粗悪
  2: 良質
  3: 高品質
  4: 奇跡
  5: 神器
  6: 特別
   NOTE: 値とその意味はキャラの品質と同じ
5 X座標
6 Y座標
  NOTE: アイテムが地面に置かれていない場合、X/Y座標は不定値を取る
7 一個あたりの質量
8 鑑定状態
  0: 未鑑定
  1: 部分的に鑑定済み (名前のみ判明)
  2: ほとんど鑑定済み (品質、素材、祝呪状態が判明)
  3: 完全鑑定済み
9 TODO charge
10 ダイスロール数
   XdY の X
11 ダイス面数
   XdY の Y
12 ダメージ修正
13 命中修正
14 DV
15 PV
16 関連スキルID
17 祝呪状態 1:祝福 -1:呪い -2:堕落
18 装備されている部位
   cdata(inv(18, *), *)
19 使用効果
20 強化値
21 所有状態
   -2: プレイヤーの遺留品 (アイテム消失の一歩手前)
   -1: プレイヤーの遺留品 (アイテム消失の二歩手前)
   0: 通常アイテム
   1: 自分のものではないアイテム
   2: 持ち運べないアイテム (行商人の落とすカバン)
   3: 展開されたシェルター
   4: 収穫依頼の作物
   5: 利用できないアイテム (ショウルームのアイテム or 聖夜祭の女神像)
22 色ID
23 名称に付与される修飾子など
24 素材ID
25 付加情報1
26 付加情報2
27 付加情報3
28 付加情報4
29 鑑定難易度
30 ターン数
31-34 (unused)
35 ibit格納域
36-39 (unused)
40 エンチャント1個目のID
41 エンチャント1個目のパワー
42 エンチャント2個目のID
43 エンチャント2個目のパワー
44 エンチャント3個目のID
45 エンチャント3個目のパワー
46 エンチャント4個目のID
47 エンチャント4個目のパワー
48 エンチャント5個目のID
49 エンチャント5個目のパワー
50 エンチャント6個目のID
51 エンチャント6個目のパワー
52 エンチャント7個目のID
53 エンチャント7個目のパワー
54 エンチャント8個目のID
55 エンチャント8個目のパワー
56 エンチャント9個目のID
57 エンチャント9個目のパワー
58 エンチャント10個目のID
59 エンチャント10個目のパワー
60 エンチャント11個目のID
61 エンチャント11個目のパワー
62 エンチャント12個目のID
63 エンチャント12個目のパワー
64 エンチャント13個目のID
65 エンチャント13個目のパワー
66 エンチャント14個目のID
67 エンチャント14個目のパワー
68 エンチャント15個目のID
69 エンチャント15個目のパワー



map
    i32 x WIDTH x HEIGHT x 10

0 実際のマップチップID
1 キャラ番号 + 1
  キャラクタがいない場合は 0
  乗馬している場合、馬ではなく乗馬しているキャラが入る
2 見えているマップチップID
3 (unused)
4 実際のアイテム情報
5 見えているアイテム情報
  4と5は同じ構造で、置かれているアイテムの個数によって情報の格納のされ方が異なる
  1個
    上位2bitがアイテムチップID、下位2bitが色ID
  2個か3個
      (アイテム番号1 - 5080) * -1
    + (アイテム番号2 - 5080) * -1000
    + (アイテム番号3 - 5080) * -1000000
    NOTE: 2個の場合はアイテム番号3 が 6079 (5080 + 999) となる
  4個以上
    上位2bitが363 (袋のアイテムチップ)、下位2bitが0 (色なし)
6 フィート情報
7 血溜まりまたは瓦礫
8 マップエフェクト番号 + 1
  マップエフェクトがない場合は 0
9 光ID






mdata.s1
    i32 x 100


0 幅 (東西方向の大きさ)
1 高さ (南北方向の大きさ)
2 マップチップセットID
  値の意味は adata(4, *) と同じ
3 次に再生成される日時 (単位: 時)
4 降り階段のX座標 + Y座標 * 1000
5 昇り階段のX座標 + Y座標 * 1000
6 マップタイプ
  値の意味は adata(0, *) と同じ
7 再生成フラグ
  値の意味は adata(11, *) と同じ
8 TODO
  値の意味は adata(12, *) と同じ
9 ターンコスト
  値の意味は adata(9, *) と同じ
10 TODO ランダム生成係数(固定でないキャラ・アイテムの初期生成とキャラの再沸きに使用)
11 危険度 (開始階層)
   値の意味は adata(17, *) と同じ
12 タイルセットID
   値の意味は adata(18, *) と同じ
13 BGM ID
   NOTE: 実際に流されるBGMは必ずしもこの値を参照しているわけではない
14 屋内フラグ
   値の意味は adata(21, *) と同じ
15 (unused)
   代入されているが参照されない。map_initcustom を呼ぶと 1 に設定される
16 次にマップが更新される日時 (単位: 時)
17 マップが更新されないフラグ
   NOTE: mdata(7) とは異なる
18 地面に置けるアイテムの最大数
   NOTE: システム上の最大数はすべてのマップで 400 だが、プレイヤーが置く[d]ときの最大数にはこの値が使われる
19 マップが生成されたときの、gdata(184) の値
   gdata(184) は 0 から始まり、本家の古いバージョン (1.14 より前) からアップデートした場合、または resetmap コマンドを使った場合にインクリメントされる
   mdata(19) と gdata(184) が異なれば、マップを強制的に再生成する。gdata(184) がインクリメントされる条件からも分かる通り、通常プレイしている範囲で使用することはない
20 焚き火が地面に置かれているかどうか
   置かれている場合、焚き火の環境音が流れる
21 (unused)
   マップが生成されるときに 1 がセットされるが、最初に参照される前に必ず 1 がセットされるため、いつ参照しても 1 になっており、意味をなさない
22-99 (unused)






mef
    i32 x 9 x 200

0 マップエフェクト ID
  0 (empty)
    このマップエフェクトが使用されていないことを示すフラグになっている
  1 蜘蛛の巣
  2 闇の霧
  3 酸の海
  4 (unused)
  5 火柱
  6 ポーション
  7 原子爆弾
1 アイテムチップID + 色ID * 10000
  11 蜘蛛の巣
  30 闇の霧
  19 酸の海
  20 (unused)
  24 火柱
  27 ポーション + ポーションの色ID * 10000
  632 原子爆弾
2 マップ上のX座標
3 マップ上のY座標
4 消えるまでの残りターン数
  0 になると消える。この変数が -1 の場合時間経過で消滅しない
  -1 になるのは蜘蛛の巣とポーションのみ
5 パワー
6 マップエフェクトを発生させたキャラのキャラ番号
  NOTE: 火柱の場合、他のプレイヤーが起こした火事でもプレイヤーが放火したことになる
7 アイテムID
  ポーション以外では使われない
8 祝呪状態
  ポーション以外では使われない


mdatan
    string x 2

0 マップ名



cdatan
    string x 10 x 245

0 名前
1 異名
2 種族ID
3 職業ID
4 教えた言葉またはctalkのファイル名
  cbit(989, *) が 0 なら教えた言葉、1 ならファイル名
5 CNPC ID
6-9 (unused)
