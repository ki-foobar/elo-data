elm
    cdataelm.s1
        i32 x 100 x 245

        0 現在の攻撃連続ヒット数
        1 コンボゲージ
        2 連鎖によるダメージ倍率の増加量
        3 最大連続ヒット数
          [c]キャラシートの最大連鎖の項目から確認できる
          NOTE: 連続ヒットの仕様に関しては、Elm の readme あるいは history を「連続ヒット」または「コンボ」で検索して引っかかる箇所に詳しく書かれている
        4 結婚首輪を飲み込んだ回数
        5 結婚指輪を飲み込んだ回数
          いずれも、Elm の変更「ペットが飲み込んだ結婚指輪や結婚首輪は、生もの製でなければフンと一緒に排出されるように」を実現するための変数。飲み込むと +1、排出すると -1 される
        6 演奏依頼に出席している NPC の、演奏に対する満足度
          NOTE: 本家では演奏の満足度は cdata(17, *) (プレイヤーへの好感度) で計算される。Elm では、媚薬ヴァリアントたるその性質上、好感度だけを基準にすると演奏依頼の難易度が大幅に変化してしまう。それを防ぐため、演奏に対する満足度はこの変数に格納され、好感度とは別に計算される
        7 投げるポーションのアイテムID
          南瓜系のみに設定される。特定のポーションしか投げない南瓜のための変数。ポーションは本来投げるポーションの候補から選ばれる
        8 Elm追加状態異常「催淫」の残りターン数
          毒などと変数の使い方は同じ
        9 ペットのAI指示: 特殊弾を使用する頻度
          0-50 までの百分率
        10 エーテル病蓄積度
        11 エンチャント「エーテルの病を促進する」がついた装備の合計強度値
           エンチャント1つあたり +5
        12 エンチャント「エーテルの風からあなたを保護する」がついた装備をしているかどうか
           0: 装備していない
           1: 装備中
           NOTE: 本家ではエーテル病はプレイヤーにのみ作用するものだったが、Elm で NPC にもエーテルが蓄積するようになったため、これらエーテル病関連の値を各キャラごとに保存する必要が生じた
        13 詰めている間合いの距離
           Elm の変更「適正距離が3以上のNPCは、武器が無いか矢弾が合わなくて遠隔攻撃が出来なかった時に間合いを詰めるように」のための変数
           条件を満たしている場合、この変数が +1 されていき、条件を満たしていない場合は 0 に戻る。この変数は aiDist から減算され、詰めている間合いの分だけ aiDist が短くなったような動きをする
        14 ペットのAI指示: 戦闘への積極性
           0: なし
           1: 低い (本家準拠)
           2: 普通
           3: 主人を守る
           4: 高い
        15 ペットのAI指示: 回復行動のしきい値
           0: 25% (本家準拠)
           1: 50%
           2: 75%
        16 ペットのAI指示: 食べ物の拾い食い
           0: する (本家準拠)
           1: しない
        17 ペットのAI指示: 泉の水の拾い飲み
           0: する (本家準拠)
           1: しない
        18-24 (unused)
        25 食事中断フラグ
           食事中に攻撃を受けて中断すると、この変数が 8 に設定され、ターン経過のたび 1 減る。この変数が非 0 のときは地面に食べ物があっても食事を始めない
           NOTE: 本家のペットが食事中にダメージを受けると食事の開始と中断を繰り返す。それを防ぐための変数
        26 媚薬混入装備の効果値合計
           媚薬を混入した装備品一つごとに +5 され、この値に応じて媚薬漬け発症確率の増加と催淫回復頻度の低下が起こる
        27 毒薬混入装備の効果値合計
           毒薬を混入した装備品一つごとに +5 され、この値に応じてスリップダメージの増加と毒回復頻度の低下が起こる
        28-48 (unused)
        49 一番最後に描写された PCC のフレーム
           麻痺や睡眠などで動けないときはフレームを進めずにこの変数が使われる
        50-59 cbitex 用領域
              実際に使われているのは cdataex(50, *) のみ
        60-79 スキルロック用領域
              スキルロック機能については Elm の history に詳しい。それぞれは bit フラグになっており、スキル ID が x であるようなスキルがロックされているかどうかは cdataex(x / 32 + 60, *) の x % 32 番目のビットで判定される
        80-99 (unused)



    cbitex
        0 媚薬漬けフラグ
          媚薬漬けについては Elm の history に詳しい
        1 ペットのAI指示: 特殊弾の使用
          0: する (本家準拠)
          1: しない
        2 地面に金貨や鉱石が複数置かれておりかつ「金貨や鉱石の拾得」の指示が「積極的」である際に、既に金貨や鉱石を拾っていることを示すフラグ
          一人のペットが独り占めするのを防ぐため
        3 気持ちいいこと経験済みフラグ
          このフラグが 0 だと最初の「気持ちいいこと」後に出血しフラグが立つ。死ぬと 0 に戻る
        4 ハイパーレーザー持ちフラグ
          光の嵐『セシリア』と『U.S.C.』にのみ付与される
        5 覚聖フラグ
          0: 通常
          1: 覚醒中
          「覚聖」については Elm の readme に詳しい
        6 ペットのAI指示: 金貨や鉱石の拾得
          0: 普通 (本家準拠)
          1: 積極的
        7 ペットのAI指示: 開扉
          0: する (本家準拠)
          1: しない
        8 瀕死時の回復ポーション
        9 リトルシスター殺害数にカウントされないフラグ
          リトルシスター殺害数カウントについては、Elm の readme に詳しいが、そこに記述されている条件のうち「ビッグダディの死因がPCでも仲間でもない」ないし「PCから見えない位置に出現した」ことを示すフラグ
          NOTE: readme には「上記の条件を全て満たした」と書かれているが、実際には上に挙げた2条件は OR で判定されるようだ
        10 NPC を採掘中フラグ
           プレイヤーのみに付与されるフラグ。NPC の「採掘」については Elm の readme に詳しい
        11 不明
        12 不明
           cbitex(11, *) は 0 にセットされるだけ、cbitex(12, *) は参照されるだけで、どちらも意味がないように思われる



    gdataelm.s1
        i32 x 100

        0 Elm のバージョン番号
          現在入手可能な最新版では 60
        1 最後にレシマスに地殻変動が起こった年
          レシマスの地殻変動は Elm追加設定「*勝利*後のレシマス再生成」から設定できる
        2 終末を起こしたキャラのキャラ番号
        3 終末を起こしたキャラがいた場所
          マップ番号 * 1000 + 階層
          キャラ番号が 56 以上であるとき、マップを跨ぐとキャラ番号が一致していても別のキャラになってしまうため同じマップ同じ階層かどうかを調べる必要が出てくる
        4 ペットのAI指示: 戦闘への積極性
          cdataex(14, *) とは異なり、ペット全員に作用する
        5 ペットのAI指示: 金貨や鉱石の拾得
          cbitex(6, *) とは異なり、ペット全員に作用する
        6 ペットのAI指示: 開扉
          cbitex(7, *) とは異なり、ペット全員に作用する
        7 ペットのAI指示: 特殊弾の使用
          cbitex(1, *) とは異なり、ペット全員に作用する
        8 ペットのAI指示: 回復行動のしきい値
          cdataex(15, *) とは異なり、ペット全員に作用する
        9 ペットのAI指示: 食べ物の拾い食い
          cdataex(16, *) とは異なり、ペット全員に作用する
        10 ペットのAI指示: 泉の水の拾い飲み
          cdataex(17, *) とは異なり、ペット全員に作用する
        20 レシマスで最後に脱出/帰還を使った階層
        21 すくつで最後に脱出/帰還を使った階層
           いずれも帰還のリストに追加される
        22-79 (unused)
        80 呪われた/堕落した核爆弾によるダメージ増加倍率
           0: 通常/祝福された核爆弾
           1: 呪われた核爆弾
           2: 堕落した核爆弾
           ダメージがそれぞれ 1000 (本家準拠)、2000 (2倍)、3000 (3倍) になる
        81-89 (unused)
        90-99 gbitex用領域



    gbitex
        0 終末エンチャによるエーテルの風が吹いているフラグ
        1 ペット全体への命令を出しているフラグ
          それぞれのペットに対し個別に出した命令よりも優先される。その際には、gdataex(4) から gdataex(10) までが使われる



    elmdata1.s1
        i32 x 500

        保存されているが、すべて 0 で埋められており、使われない



    elmdata2.s1
        i32 x 1200

        魔法の増幅率
        魔法の増幅に関しては、Elm history の「Rel.38での変更」に詳しい




    growthrecord_elm.log
        プレーンテキストファイル

        プレイヤーとペットの成長ログ。ゲーム内ではジャーナル[j]から確認できる



    変数の意味に変更はないが、mef ファイルのサイズが変わっている。マップエフェクトの最大数はマップの面積に応じて変動し、[200, 2000] まで (本家は一律で 200)。
    なお、この変更に伴い map_M_L.s2 とまったく同じ内容の mapelm_M_L.s2 が追加される。これは、Elm のセーブを本家で読み込んだとき、mef 変数の範囲外にアクセスしてしまうのを防ぐためで、map_M_L.s2 の方には [0, 200) で収まる範囲までしか保存されない
